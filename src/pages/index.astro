---
import Image from "astro/components/Image.astro";
import Layout from "../layouts/Layout.astro";
import SiteHeader from "../components/SiteHeader.astro";
import SiteFooter from "../components/SiteFooter.astro";
import FeatureRow from "../components/FeatureRow.astro";
import Testimonials from "../components/Testimonials.astro";

const title = "Organize Your Ideas Visually";
---

<Layout title={`Bleep Â· ${title}`}>
  <SiteHeader />
  <main>
    <section class="relative overflow-hidden text-center flex flex-col items-center border-b border-black/10 dark:border-white/10">
      <div class="hero-gradient"></div>

      <header class="mt-[130px] shrink-0 h-[400px] flex items-center justify-center flex-col relative z-1">

        <picture class="block mb-12 relative z-1">
          <source srcset="/assets/app_icon_dark@2x.png" media="(prefers-color-scheme: dark)" />
          <img class="w-[66px] h-[66px] transition-[filter] duration-300 drop-shadow-xl drop-shadow-[#ff5252]/20 dark:drop-shadow-black/20" src="/assets/app_icon@2x.png" alt="An app icon representing the letter B in abstract form" />
        </picture>

        <h1 class="font-serif font-normal leading-16 text-3xl md:text-5xl mb-4 tracking-tight animate-item">
          Beautiful. Private. Organized.
        </h1>
        <h2 class="font-[450] text-lg md:text-xl text-[#647082] dark:text-[#cfebfe] leading-normal animate-item">
          Visual bookmarking app that works offline<br />and syncs securely via iCloud
        </h2>

        <a class="inline-block leading-4 mt-8 bg-white text-black font-[550] text-[0.95rem] rounded-full py-2.5 px-6 ring ring-black/8 dark:border-transparent shadow-[0_0_8px_rgb(0_0_0/0.05)] no-underline transition-[transform,box-shadow] duration-200 animate-item" href="https://apps.apple.com/app/bleep-think-visually/id1638417383">
        Get Bleep for iOS &amp; Mac
      </a>
      </header>

        <picture class="flex-1 relative z-1 animate-item">
          <source srcset="/assets/hero_devices_dark.png" media="(prefers-color-scheme: dark)" />
          <img class="block h-[500px] object-scale-down" src="/assets/hero_devices_light.png" alt="Bleep running on MacBook, iPad, and iPhone" />
        </picture>
    </section>

    <div class="max-w-[860px] mx-auto mt-8 px-[var(--safe-area-padding)]">
      <div class="text-center mb-4">
        <span class="text-[var(--color-accent)] uppercase tracking-[0.08em] text-sm font-bold">FEATURES</span>
        <h2 class="font-serif font-normal text-2xl md:text-[2.5rem] leading-[1.2] mt-1">Have Fun With Your Thoughts</h2>
      </div>

      <FeatureRow
        title="Capture Anything"
        description="Share links quickly via extensions, and drag and drop directly into Bleep."
        image="/assets/feature_capture_light.png"
        imageDark="/assets/feature_capture_dark.png"
      />

      <FeatureRow
        title="Organize Visually"
        description="Rich previews for each of your items so you can see what you have at a glance. Rearrange by dragging and organize into rooms."
        image="/assets/feature_organize_light.png"
        imageDark="/assets/feature_organize_dark.png"
        reverse
      />

      <FeatureRow
        title="Write, Browse, Explore"
        description="Bleep is not just for bookmarks, it's for ideas that come in many shapes and forms. You can add notes, view images in a gallery, etc."
        image="/assets/feature_flexible_light.png"
        imageDark="/assets/feature_flexible_dark.png"
      />
    </div>

    <Testimonials />
  </main>
  <SiteFooter animate />
</Layout>

<script>
  // Check if animations have played this session
  const hasAnimationsPlayed = sessionStorage.getItem("hasAnimationsPlayed");

  if (!hasAnimationsPlayed) {
    // Add animation classes to elements
    document.querySelectorAll(".animate-item").forEach((element, index) => {
      element.classList.add("animate");
    });

    // Store that animations have played
    sessionStorage.setItem("hasAnimationsPlayed", "true");
  }
</script>

<style>
  h1 {
    word-spacing: 0.075em;
  }

  /* Hero gradient - complex radial gradient with viewport units */
  .hero-gradient {
    position: absolute;
    inset: 0;
    z-index: 0;
    width: 100dvw;
    height: 100dvw;
    left: 50%;
    bottom: 0;
    transform: translate(-50%);
    background: radial-gradient(ellipse at 50% 52%, rgba(112, 176, 227, 0.4) 0%, rgba(94, 158, 209, 0.06) 70%);
    pointer-events: none;
  }

  @media (prefers-color-scheme: dark) {
    .hero-gradient {
      background: radial-gradient(ellipse at 50% 52%, rgba(94, 158, 209, 0.5) 0%, rgba(94, 158, 209, 0) 70%);
    }
  }

  /* Animation keyframes and delays */
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideUpAndScale {
    from {
      opacity: 0;
      transform: translateY(20px) scale(0.9);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .animate {
    opacity: 0;
  }

  picture.animate:first-of-type {
    animation: slideUpAndScale 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    animation-delay: 0.4s;
  }

  h1.animate {
    animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    animation-delay: 0.4s;
  }

  h2.animate {
    animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    animation-delay: 0.5s;
  }

  a.animate {
    animation: slideUp 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    animation-delay: 0.6s;
  }

  picture.animate:last-of-type {
    animation: slideUp 0.5s ease-out forwards;
    animation-delay: 0.7s;
  }
</style>
