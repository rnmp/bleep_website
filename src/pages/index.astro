---
import Image from "astro/components/Image.astro";
import Layout from "../layouts/Layout.astro";
import SiteHeader from "../components/SiteHeader.astro";
import SiteFooter from "../components/SiteFooter.astro";
import FeatureRow from "../components/FeatureRow.astro";
import Testimonials from "../components/Testimonials.astro";

const title = "Organize Your Ideas Visually";
---

<Layout title={`Bleep Â· ${title}`}>
  <SiteHeader />
  <main>
    <section class="hero">
      <div class="hero-gradient"></div>

      <header>

        <picture class="hero-logo animate-item">
          <source srcset="/assets/app_icon_dark@2x.png" media="(prefers-color-scheme: dark)" />
          <img src="/assets/app_icon@2x.png" alt="An app icon representing the letter B in abstract form" />
        </picture>

        <h1 class="animate-item">
          Beautiful. Private. Organized.
        </h1>
        <h2 class="animate-item">
          Visual bookmarking app that works offline<br />and syncs securely via iCloud
        </h2>

      <a class="cta-button animate-item" href="https://apps.apple.com/app/bleep-think-visually/id1638417383">
        Get Bleep for iOS &amp; Mac
      </a>
      </header>

        <picture class="hero-devices animate-item">
          <source srcset="/assets/hero_devices_dark.png" media="(prefers-color-scheme: dark)" />
          <img src="/assets/hero_devices_light.png" alt="Bleep running on MacBook, iPad, and iPhone" />
        </picture>
    </section>

    <div class="features">
      <div class="features-header">
        <span class="features-label">FEATURES</span>
        <h2>Have Fun With Your Thoughts</h2>
      </div>

      <FeatureRow
        title="Capture Anything"
        description="Share links quickly via extensions, and drag and drop directly into Bleep."
        image="/assets/feature_capture_light.png"
        imageDark="/assets/feature_capture_dark.png"
      />

      <FeatureRow
        title="Organize Visually"
        description="Rich previews for each of your items so you can see what you have at a glance. Rearrange by dragging and organize into rooms."
        image="/assets/feature_organize_light.png"
        imageDark="/assets/feature_organize_dark.png"
        reverse
      />

      <FeatureRow
        title="Write, Browse, Explore"
        description="Bleep is not just for bookmarks, it's for ideas that come in many shapes and forms. You can add notes, view images in a gallery, etc."
        image="/assets/feature_flexible_light.png"
        imageDark="/assets/feature_flexible_dark.png"
      />
    </div>

    <Testimonials />
  </main>
  <SiteFooter animate />
</Layout>

<script>
  // Check if animations have played this session
  const hasAnimationsPlayed = sessionStorage.getItem("hasAnimationsPlayed");

  if (!hasAnimationsPlayed) {
    // Add animation classes to elements
    document.querySelectorAll(".animate-item").forEach((element, index) => {
      element.classList.add("animate");
    });

    // Store that animations have played
    sessionStorage.setItem("hasAnimationsPlayed", "true");
  }
</script>

<style>
  main {
    /* padding: 0 var(--safe-area-padding); */
  }

  h1 {
    word-spacing: 0.075em;
  }

  .hero {
    position: relative;
    overflow: hidden;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }


  @media (prefers-color-scheme: dark) {
    .hero {
      border-bottom-color: rgba(255, 255, 255, 0.1);
    }
  }

  .hero-gradient {
    position: absolute;
    inset: 0;
    z-index: 0;
    width: 100dvw;
    height: 100dvw;
    left: 50%;
    bottom: 0;
    transform: translate(-50%);
    background: radial-gradient(ellipse at 50% 52%, rgba(112, 176, 227, 0.4) 0%, rgba(94, 158, 209, 0.06) 70%);
    pointer-events: none;
  }

  @media (prefers-color-scheme: dark) {
    .hero-gradient {
      background: radial-gradient(ellipse at 50% 52%, rgba(94, 158, 209, 0.5) 0%, rgba(94, 158, 209, 0) 70%);
    }
  }


  .hero header {
    margin-top: 130px;
    flex-shrink: 0;
    height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }

  .hero > *:not(.hero-gradient) {
    position: relative;
    z-index: 1;
  }

  .hero-logo {
    display: block;
    margin-bottom: 32px;
    position: relative;
    z-index: 1;
    &::before {
      /* content: ""; */
      position: absolute;
      inset: 0px;
      z-index: -1;
      filter: blur(20px);
      background: rgb(from var(--color-accent) r g b / 0.4);
      transition: filter 0.3s ease;
    }
    img {
      transition: filter 0.3s ease;
    width: 66px;
    height: 66px;
    }
  }

  header h1 {
    font-family: "Jugendreisen", serif;
    font-weight: 400;
    font-size: 2em;
    line-height: 1.2;
    margin-bottom: 16px;
    letter-spacing: -1.44%;
    word-spacing: -1.44%;
  }

  header h2 {
    font-weight: 450;
    font-size: 1.15rem;
    color: #647082;
    line-height: 1.5;
  }

  @media (prefers-color-scheme: dark) {
    header h2 {
      color: #cfebfe;
    }
  }

  @media (min-width: 720px) {
    header h1 {
      font-size: 3rem;
    }

    header h2 {
      font-size: 1.25rem;
    }
  }

  /* CTA Button */
  .cta-button {
    display: inline-block;
    margin-top: 32px;
    background: white;
    color: black;
    font-weight: 550;
    font-size: 0.95rem;
    border-radius: 999px;
    padding: 10px 24px;
    border: 1px solid #acc7dd6e;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.05);
    text-decoration: none;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .cta-button:hover {
    color: black;
    transform: scale(1.03);
    box-shadow: 0 0 12px rgba(0, 0, 0, 0.1);
  }

  @media (prefers-color-scheme: dark) {
    .cta-button {
      border-color: transparent;
    }
  }

  /* Device Mockup */
  .hero-devices {
    flex: 1;
    height: 500px
  }

  .hero-devices img {
    display: block;
    height: 100%;
    width: auto;
  }

  .features {
    max-width: 860px;
    margin: 2rem auto 0;
    padding: 0 var(--safe-area-padding);
  }

  .features-header {
    text-align: center;
    margin-bottom: 1rem;
  }

  .features-label {
    color: var(--color-accent);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-size: 0.875rem;
    font-weight: 700;
  }

  .features-header h2 {
    font-family: "Jugendreisen", serif;
    font-weight: 400;
    font-size: 2rem;
    line-height: 1.2;
    margin-top: 0.25em;
  }

  @media (min-width: 720px) {
    .features-header h2 {
      font-size: 2.5rem;
    }
  }

  /* Animations */
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideUpAndScale {
    from {
      opacity: 0;
      transform: translateY(20px) scale(0.9);
    }

    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* Set initial state for all animated elements */
  .animate {
    opacity: 0;
  }

  /* Apply animations only when .animate class is present */
  .hero-logo.animate {
    animation: slideUpAndScale 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    animation-delay: 0.4s;
  }

  header h1.animate {
    animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    animation-delay: 0.4s;
  }

  header h2.animate {
    animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    animation-delay: 0.5s;
  }

  .cta-button.animate {
    animation: slideUp 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    animation-delay: 0.6s;
  }

  .hero-devices.animate {
    animation: slideUp 0.5s ease-out forwards;
    animation-delay: 0.7s;
  }
</style>
